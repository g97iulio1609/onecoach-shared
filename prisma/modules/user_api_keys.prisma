// ============================================================================
// USER API KEYS MODULE - User API Keys Management
// ============================================================================

enum ApiKeyStatus {
  ACTIVE
  REVOKED
  EXPIRED
}

model user_api_keys {
  id                    String       @id @default(cuid())
  provider              String       @default("openrouter")
  keyLabel              String
  keyHash               String
  limit                 Int
  status                ApiKeyStatus @default(ACTIVE)
  stripePaymentIntentId String?
  createdAt             DateTime     @default(now())
  updatedAt             DateTime     @updatedAt
  userId                String?      @db.Uuid
  users                 users?       @relation(fields: [userId], references: [id], onDelete: Cascade, map: "user_api_keys_userid_fkey")

  @@index([stripePaymentIntentId])
  @@index([status])
  @@index([provider])
  @@index([userId])
}

