// ============================================================================
// TEMPLATES MODULE - Workout, Nutrition, and Meal Templates
// ============================================================================

enum TemplateType {
  meal
  day
  week
}

enum WorkoutTemplateType {
  exercise
  day
  week
  progression
}

model workout_templates {
  id          String              @id @default(cuid())
  type        WorkoutTemplateType
  name        String
  description String?
  category    String?
  tags        String[]            @default([])
  data        Json
  isPublic    Boolean             @default(false)
  usageCount  Int                 @default(0)
  lastUsedAt  DateTime?
  createdAt   DateTime            @default(now())
  updatedAt   DateTime            @updatedAt
  userId      String?             @db.Uuid
  users       users?              @relation(fields: [userId], references: [id], onDelete: Cascade, map: "workout_templates_userid_fkey")

  @@index([type])
  @@index([category])
  @@index([createdAt])
  @@index([lastUsedAt])
  @@index([usageCount])
  @@index([tags], type: Gin)
  @@index([userId, category], map: "idx_workout_templates_user_category")
  @@index([userId, type], map: "idx_workout_templates_user_type")
  @@index([userId])
}

model nutrition_templates {
  id          String       @id @default(cuid())
  type        TemplateType
  name        String
  description String?
  category    String?
  tags        String[]     @default([])
  data        Json
  isPublic    Boolean      @default(false)
  usageCount  Int          @default(0)
  lastUsedAt  DateTime?
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  userId      String?      @db.Uuid
  users       users?       @relation(fields: [userId], references: [id], onDelete: Cascade, map: "nutrition_templates_userid_fkey")

  @@index([type])
  @@index([category])
  @@index([createdAt])
  @@index([lastUsedAt])
  @@index([usageCount])
  @@index([tags], type: Gin)
  @@index([userId, category], map: "idx_nutrition_templates_user_category")
  @@index([userId, type], map: "idx_nutrition_templates_user_type")
  @@index([userId])
}

model meal_templates {
  id          String   @id @default(cuid())
  name        String
  description String?
  meal        Json
  tags        String[] @default([])
  isPublic    Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  userId      String?  @db.Uuid
  users       users?   @relation(fields: [userId], references: [id], onDelete: Cascade, map: "meal_templates_userid_fkey")

  @@index([createdAt])
  @@index([userId])
}

